CREATE OR REPLACE FUNCTION add_user(pass_firstName varchar, pass_lastName varchar, pass_email varchar, pass_password varchar, pass_role varchar)
returns table(user_id uuid) as $$
    DECLARE
        image_user varchar := 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAi4AAAIuCAYAAACYSoPfAAAgAElEQVR4XuzdBZgc15U24K+ahpkZNKQRWLItyRjHjsNZyGYZsszM/C8zM0N2s5tsdrPZ7IacxIljxyjJYprRMPX0dPf0NA121/+cGtFIw9NQdeurJ35kR1W3znlvWb5zUcMG11Qg8tUatP/Y6Pf5/1OAAhSgAAUoQIFMC2gbvdAbnP966Il/y3RAfB8FKEABClCAAhTYSGDDhsuUP/rNmoZ/Jh0FKEABClCAAhQwi8DGPS6B2LcD+t+bJVDGQQEKUIACFKAABTZsuEwGI9/j0LW/IhEFKEABClCAAhQwi8CGDRdfMP4DST35Z2YJlHFQgAIUoAAFKECBTYaKoj8K4A9JRAEKUIACFKAABcwisGHDZToY/Uldx++aJVDGQQEKUIACFKAABTbucfGHfw6a4zdIRAEKUIACFKAABcwisHGPSyD2/3Tov2KWQBkHBShAAQpQgAIU2KTHJfJr0LRfIBEFKEABClCAAhQwi8AmO+dGfws6fsYsgTIO8wjoADb8cG6EuZ17zJMRI6EABShAAasIbLxzbiD6+xrw41ZJhHFSgAIUoAAFKKC+wGbLof8YwA+rT8AMKUABClCAAhSwisAmy6Fjf67r+vdbJRHGmVoBDvWk1pOlUYACFKBAagQ26XGJ/A2gfVdqXsNSKEABClCAAhSgwN4FNjtk8R8A/dv2/gqWQAEKUIACFKAABVIjsPHkXH/0XzQN35Sa17AUClCAAhSgAAUosHeBzZZD/zt0fN3eX8ESKEABClCAAhSgQGoENlkOHflPDdpXpuY1LIUCFKAABShAAQrsXWCTHpfYR6DrX773V7AEClCAAhSgAAUokBqBzTag+5gGvDM1r2EpFKAABShAAQpQYO8CmxyyGP2UDrx1769gCRSgAAUoQAEKUCA1ApsdsvgsNO2p1LyGpVCAAhSgAAUoQIG9C2zW4/IFHXjD3l/BEswuwF1yzV5DjI8CFKAABW4KbLbl/4u6rj9CKnUE2EBRpy6ZCQUoQAG7Cmx2yOJrAI7ZFYZ5U4ACFKAABShgPoHNelxe13X9qPlCZkQUoAAFKEABCthVYLMelwsADtoVhnlTgAIUoAAFKGA+gc0aLlcA9JgvZEZEAQpQgAIUoIBdBTZbDn0dmrbPrjDMmwIUoAAFKEAB8wls0uMSGwb0FvOFbK+IuBLIXvXNbClAAQpQYHOBzYaKJgDUE5ACFKAABShAAQqYRWCzhss0gGqzBMo4KEABClCAAhSgwCaHLEaCGrQyElGAAhSgAAUoQAGzCGzW4xIGUGSWQBnHzgU4P2bnZnyCAhSgAAXMLbBxj4s/Oq9pyDV3+IyOAhSgAAUoQAE7CWzW47IMwGUnDOZKAQpQgAIUoIC5BTZruMhIAy8KUIACFKAABShgGoF1Gy66rrumgzHpceFFAQpQgAIUoAAFTCOwbsNlbEzPc+fH4qaJkoFQgAIUoAAFKEABAOs2XGZm9KKEIyarinhRgAIUoAAFKEAB0wis3+MyN1fuXnEGTBMlA7lDgIuc+TlQgAIUoIB9BdZtuHgjkWosabJzLi8KUIACFKAABShgGoH1e1z88Qa3lhw3TZQMhAIUoAAFKEABCmw0x2Vydr7FkUwMU4gCFKAABShAAQqYSWD9HhffXIfb6ew3U6CMhQIUoAAFKEABCqzbcPH7wz0rmuMKeShAAQpQgAIUuFuAiySy+U2sPznXGz0EN85nMzC+mwIUoAAFKEABCtwtsG7DxTcbO5pM6q+TiwIUoAAFKEABCphJYN2Gy5R/7rimOV81U6CMhQIUoAAFKEABCqzbcJkOhB/R4XiRPBSgAAUoQAEKUMBMAhsMFc2/IZlMfMFMgTIWClCAAhSgAAUosP7kXH/0TdDwWfJQgAIUoAAFKEABMwlsMFQUfasOfMpMgTIWClCAAhSgAAUosH6Py0zsXXDo/0ceClCAAhSgAAUoYCaB9XtcZmNfrif1j5gpUMZCAQpkV0C23EokklhaWcHScsL4dTmRNP4/Xdchvy+/yuXQNDgcDjgd8qsGl8MBt9MJl8sBl/zqlN9zZDchvp0CFLCkwPrLoQORr9KgfciSGTFoClBgTwIriSQi8QWEYvOIzC8itrCI+MIS5heXsbSSMMqWZorRWNFX/x648UeJ/B/SaLn5l0MzGijSgPG4XHC7HPC4Xcbf53pcyHW7keNxIcflgsftRK7HDbfLaTzPiwIUoMB6AusPFQWjXwcd/04yClBAbYFkMmk0TryzEcyEoghGYojOLxo9KdIwSRqNEx2JpA65V/45FZf8weN0OoyGSr7HjbwcDwpyPSjOz0VRfi7yc9zG7xmNGrfL6KVhUyYV8iyDAtYX2GADuuh7NQ3vs356zIACFBCBmw2QZFJHfHEJk4E5jPtD8M1GEVtcXO1Fkd6TGw2V1DRPdmcvPTT5uR6UFOSivKgAlcUFKC3MR55HemWkt8bJYabd0fIpCighsH6PSyD2bYD+D0pkyCQoYFMBaazIsM/yygpC0XmM+UMYnwkhEI4aPShWuTRNM4aVpAFTXVqMuvJilBbmGQ0YGVbiXBmr1CTjpEBqBNZtuEzORL7b4dD+OjWvYCkUoECmBKTHZHklgcWVBOZi8xj1BTHqm8VsdP7WxNlMxZKu98gQU2lBHhoqS9FYWYrKkkLkuJ3GBGBp5PCiAAXUFthgqCjy/Zqm/bnaqTM7CqgjID0ri8srxnwVGQYa8vrhn4shkUyqk+Q6mUhvizRi2uoq0FpTjrLCfGPuDCf3Kl3tTM7mAusPFc3GfxjJ5B/b3IbpU8DUAjInZTmRQGxhCcFwDMPTQYz7Z41/tuMlw0Y1pUXoaapGc3U5cjxuTui144fAnJUX2GA5dPQnNOD3lM+eCVLAggIyHCS9K+H4InyhCAanApieDRuNGF7GamyUFOShu7EGnQ1VxkolXhSggDoC6x+yGIz+TFLHb6mTJjOhgPUFpIdlcXnZmK8yFZThoCD8czLRVu3hoL3UnCyr7qivQm9LHcqL8vdSFJ+lAAVMIrDBWUWRX9Sh/apJYmQYFLC9gPSwzEbjmPTPYdAbgD8chSxt5rW1gEzYLcjxoK22Ar0ttcYSa87h3dqNd1DArAIbNFxiv6JD/39mDZpxUcAuArJCSHawlQbL0HTAGBqSibi8di4gRw8U5uZgX30leptqUVKYt/NC+AQFKJB1gfUn5/qjvwkNP5v16BgABWwqIHuwyLb7skJIelimAnO3ttu3KUlK0r65Y69saNfTWG0MI8lmd7woQAHrCGzQ4xL9XR34SeukwUgpoI6AnAnknQ0bq4TGZmaNLfh5pVZAho9kA7vq0iIcbK1DU1WZcfAjLwpQwPwCG+ycG/0jAD9i/vAZIQXUEZBJtrORuNFgGZzyIxiJp+xsIHWUUpuJ7AMjZyS11pajt5kTeFOry9IokB6BDQ5ZjP0ZdP0H0vNKlkoBCtwtIOcHTfjnMDA1YwwPLSytEClDAvKHoNvtQkVxPvY31RqTeOVgR14UoIA5BTbocYn8NaB9tzlDZlQUUEdA9mQJRGJGD4vsxyJnCqXqBGZ1lDKTiUzevb36iL0vmVHnWyiwc4GNhor+HsC377w4PkEBCmxXQFYMTQTm0Dfuw4Q/hPml5e0+yvvSKCC9LbVlxdjfUoumylLjIEdeFKCAeQQ2OKso+j5Nw3vNEyYjoYBaAjLhdtDrR//EDALhGJc4m6x6V89AykWX7L7bWGUso+ZFAQqYQ2Cj5dD/Bg1fb44QGQUF1BLwh2PoG5vGgDdgrBiS4SJe5hOQPxwL8nKMwxsP3Nh5l6dPm6+eGJH9BDYaKvoPAF9tPw5mTIH0CchOtxOBEK6OTWNsJoQFDg2lDzuFJed6XKgrLzGWTcuvXDadQlwWRYFdCGw0Ofe/Ae3duyiPj1CAAusILCeSGJry48qYF75QFDK/hZd1BKSxUlVSiIOt9WipLoOHq46sU3mMVDmBjZZD/y90/UuUy5YJUSALAnLOkEzAvTI6jdloDAmeMZSFWtj7Kx2aZhzUKAc27qurRF6Oe++FsgQKUGDHAutPzg1EP6kBb9txaXyAAhRYIyC74F4Z9RrDQ+H4Apc6K/B9lBbkoauxGj1NNSjM46RdBaqUKVhMYKM5Lp8B8LTFcmG4FDCVgEy8vTA8iesTM4guLHESrqlqZ2/BSIOlq6EaB1pqUZSfu7fC+DQFKLAjgQ2WQ0ee0zTtiR2VxJspQIFbAtJoOTs4jusTfswvLoHrhtT7OGSzOlkqLSuOivPzoK37p6l6eTMjCmRbYINDFmNf1KE/mu3g+H4KWFFAGi2vXx/DwJQ0WripnBXrcLsxyzwXOWH6UFs9SvJzweXS25XjfRTYvcBGQ0WvAji++2L5JAXsKSCNltP9q40WLne2xzcgy6Vlzsvh1gZj2Ig9L/aod2aZPYH1e1yC0dO6jvuzFxbfTAHrCUjvyslrI7jORov1Km+PEed63MZk3UOt9SjMzwFHjfYIyscpsInARj0u5wEcohwFKLA9gaWVBF67OoL+CZ/R08I5LdtzU+muPI8bvS21ONhSh/w8Nl5UqlvmYi6BjRoulwHsN1eojIYC5hRYSSRxqm/UWPLMibjmrKNMRSVzXg63NRgNGGnI8KIABVIvsMFZRZF+aFpH6l/HEimgloD0rLzeP4ZLw1OILcq5Q2rlx2x2LiBLpe/vbEJXQxU8LtfOC+ATFKDApgIb9bgMAWilHQUosLmA9LKc7h9FOM7DEvmt3BYoK8rHsa5m44BGl9NJGgpQIIUCGy2HHtOhN6bwPSyKAsoJTPhDeOHiAGaj89xcTrna3XtCNWVFONHTirryYjgdjr0XyBIoQAFDYKMeFy+AGhpRgALrC4Si8/jc2T74QhFu48+PZEOB1tpyPNTThrJC2aCOa434qVAgFQIbHLIY9UNHRSpewDIooJrA8koSnz';
    BEGIN
        INSERT INTO users(id, first_name, last_name, email, password, image, role, confirmed)
        VALUES(uuid_generate_v4(), pass_firstName, pass_lastName, pass_email, md5(pass_password), image_user, pass_role, false);

        return query SELECT id FROM users WHERE email = pass_email;
    END;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION add_user_bio(pass_userId uuid, pass_phone varchar, pass_addressMain varchar, pass_addressCity varchar, pass_addressZip varchar, pass_addressCountry varchar, pass_dateBirth date, pass_gender varchar)
returns void as $$
    BEGIN
        INSERT INTO users_bio (id, user_uuid, phone, address_main, address_city, address_zip, address_country, date_birth, gender)
        VALUES(uuid_generate_v4(), pass_userId, pass_phone, pass_addressMain, pass_addressCity, pass_addressZip, pass_addressCountry, pass_dateBirth, pass_gender);
    END;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION add_user_settings(pass_userId uuid, pass_settingPublic boolean, pass_settingHeader1 varchar, pass_settingHeader2 varchar, pass_settingConsent boolean, pass_settingAllowContact boolean)
returns void as $$
    BEGIN
        INSERT INTO users_setting (id, user_uuid, setting_public, setting_header1, setting_header2, setting_consent, setting_allow_contact)
        VALUES(uuid_generate_v4(), pass_userId, pass_settingPublic, pass_settingHeader1, pass_settingHeader2, pass_settingConsent, pass_settingAllowContact);
    END;
$$
LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION add_user_confirmation_email(pass_userId uuid, pass_status boolean)
returns table(user_id uuid) as $$
    BEGIN
        INSERT INTO confirmation_emails(id, user_uuid, status)
        VALUES(uuid_generate_v4(), pass_userId, pass_status);

        return query SELECT id FROM confirmation_emails WHERE user_uuid = pass_userId;
    END;
$$
LANGUAGE plpgsql;